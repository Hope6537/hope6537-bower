var basePath=function(){var a=(window.location+"").split("//"),b=a[1].split("/");return a[0]+"//"+window.location.host+"/"+b[1]+"/"}(),globalConstant={AESKEY:"Hope6537JiChuang",AESIV:"1234567812345678",YES:"\u662f",NO:"\u5426",FOUNDER:"\u521b\u5efa\u8005",READER:"\u53ea\u8bfb",WRITER:"\u8bfb\u5199",FOLDER:"\u6587\u4ef6\u5939",FILE:"\u6587\u4ef6",STATUS_NORMAL:"\u6b63\u5e38",STATUS_DIE:"\u4e0d\u53ef\u7528",STATUS_JUDGE:"\u5f85\u5ba1\u6838"},globalFunction={autoCompleteDriver:function(a,b,c,d,e,f){$.ajax({url:a,
    type:b,contentType:"application/json",data:JSON.stringify(c),success:function(a){globalFunction.returnResult(a,void 0,!1)&&(a=e(a),$(d).autocomplete({lookup:a,onSelect:function(a){f(a)}}))}})},autoCompleteBySelect2:function(a,b,c,d,e){var f=$(d);$.ajax({url:a,contentType:"application/json",type:b,async:!1,success:function(a){globalFunction.returnResult(a,void 0,!1)&&e(a,f)}})},returnResult:function(a,b,c,d){var e=""==b||void 0==b,f=d=void 0==d;if(a.ok)return 0!=c&&toast.success(e?a.returnMsg:b),!0;
    toast.error(f?a.returnMsg:d);return!1},replaceHtml:function(a){a=a.replace(/<[^>].*?>/g,"");return a=a.replace("&nbsp;","")},delHtmlTag:function(a){a=a.replace(/<\/?[^>]*>/gim,"");return a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s/g,"")},Encrypt:function(a){var b=CryptoJS.enc.Utf8.parse(globalConstant.AESKEY),c=CryptoJS.enc.Utf8.parse(globalConstant.AESIV);a=CryptoJS.enc.Utf8.parse(a);return CryptoJS.AES.encrypt(a,b,{iv:c,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString()},Decrypt:function(a){var b=
    CryptoJS.enc.Utf8.parse(globalConstant.AESKEY),c=CryptoJS.enc.Utf8.parse(globalConstant.AESIV);return CryptoJS.AES.decrypt(a,b,{iv:c,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)}};
$(function(){$.fn.modal.Constructor.prototype.enforceFocus=function(){modal_this=this;$(document).on("focusin.modal",function(a){modal_this.$element[0]===a.target||modal_this.$element.has(a.target).length||$(a.target.parentNode).hasClass("cke_dialog_ui_input_select")||$(a.target.parentNode).hasClass("cke_dialog_ui_input_text")||modal_this.$element.focus()})};$.ajaxSetup({cache:!1,dataType:"json",error:function(a,c,d){a.responseJSON?toast.error(a.responseJSON.returnMsg):toast.error("\u72b6\u6001\uff1a"+
a.status+", \u9519\u8bef\uff1a"+a.statusText);Metronic.unblockUI(customGlobal.blockUITarget)}});$.validator.setDefaults({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!0,ignore:"",highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(a){a.closest(".form-group").removeClass("has-error")},invalidHandler:function(a,c){toastr.error("\u8868\u5355\u4fe1\u606f\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u6838\u5bf9\u540e\u518d\u63d0\u4ea4\u3002")}});
    $.validator.messages.equalTo="\u4e24\u6b21\u8f93\u5165\u4e0d\u76f8\u540c";$("#menu_"+$("#menuParentId").val()).addClass("active").find("span.arrow").addClass("open");$("#menu_"+$("#menuId").val()).addClass("active");var a=$("#menuSearch").on("keydown",function(a){var c=$(this).getGAutoHiddenValue();13==a.which&&void 0!=c&&""!=c&&(a.preventDefault(),customGlobal.menuSearch(c))});$("#menuSearchBtn").on("click",function(){var b=a.getGAutoHiddenValue();void 0!=b&&""!=b&&customGlobal.menuSearch(b)});customGlobal.initUpdatePasswordEvent()});
var customGlobal={onSortColumnDefault:function(a,b){return{sortColumn:a,sortDirection:b}},blockUI:function(a){void 0!==a?(customGlobal.blockUITarget=a,Metronic.blockUI({target:a,boxed:!0,message:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u5019..."})):Metronic.blockUI({boxed:!0,message:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u5019..."})},ajaxCallback:function(a){Metronic.unblockUI(customGlobal.blockUITarget);if(a.ok)return toast.success(a.returnMsg),!0;if(a.error)return toast.error(a.returnMsg),!1;if(a.warn)return toast.warn(a.returnMsg),
    !0},clearFormAndShowDialog:function(a){$("#"+a).find("input:text,input:password,select,textarea").val("").end().modal("show").find("div.form-group").removeClass("has-error")},menuSearch:function(a){$.post("develop/menu/menuSearch",{menuId:a},function(a){customGlobal.ajaxCallback(a)&&(location.href=a.returnData.url)})},initUpdatePasswordEvent:function(){$("#updatePass").on("click",function(){customGlobal.clearFormAndShowDialog("updatePasswordModal");$("#updatePasswordDialog").validate({rules:{oldPassword:{required:!0},
    reNewPassword:{equalTo:"#newPassword"}}}).resetForm();$("#passwordHelpBlock").html("")});$("#updatePassword").on("click",function(){customGlobal.blockUI("#updatePasswordContent");$.ajax({url:"security/user/updatePassword",data:{oldPassword:$("#oldPassword").val().md5(),newPassword:$("#newPassword").val().md5()},type:"post",success:function(a){customGlobal.ajaxCallback(a)&&$("#updatePasswordModal").modal("hide")}})})},generalClass:{0:"label-danger",1:"label-success"}};